<%- include("../partials/user/header.ejs") %>
    <%- include("../partials/user/navbar.ejs") %>

        <div class="row mt-5 pt-5">
            <div class="col-md-3 mt-5 d-none d-lg-block">
                <div class="sidebar-content ms-5 w-100" style="position: sticky;top: 100px;">
                    <div class="bg-dark rounded-3 mb-4">
                        <h6 class="text-white d-flex align-items-center py-3 ps-2 text-truncate"><i
                                class="bi bi-person-circle fs-4 me-2"></i>Hello <%= user.name %></h6>
                    </div>
                    <ul class="nav flex-column ">
                        <li class="nav-item"><a class="nav-link text-dark border" href="/profile"><i
                                    class="bi bi-person-circle me-2"></i> Profile</a></li>
                        <li class="nav-item"><a class="nav-link text-dark border" href="/orders"><i
                                    class="bi bi-inboxes-fill me-2"></i> Orders</a></li>
                        <li class="nav-item"><a class="nav-link text-dark border" href="/wallet"><i
                                    class="bi bi-wallet me-2"></i> Wallet</a></li>
                        <li class="nav-item"><a class="nav-link text-dark border" href="/address"><i
                                    class="bi bi-geo me-2"></i> Address</a></li>
                        <li class="nav-item"><a class="nav-link text-dark border" href="/profile/refer&earn"><i
                                    class="bi bi-gift me-2"></i> Reffer & Earn</a></li>
                        <li class="nav-item"><a class="nav-link text-dark border text-truncate" href="/delete-account"
                              ><i class="bi bi-trash2-fill me-2"></i> Delete
                                Account</a></li>
                        <li class="nav-item"><a class="nav-link text-dark border" href="/logout"><i
                                    class="bi bi-box-arrow-right me-2"></i> Logout</a></li>
                    </ul>
                    <form action="/delete-account" method="post" style="display: none;" id="deleteAccountForm"></form>
                </div>
            </div>

            <!-- Main content -->
            <div class="col-md-9 mt-4 mx-auto">
                <div id="mainContent" class="main-content container">
                    <div class="card shadow rounded-4 mx-auto p-4" style="max-width: 600px;">
                        <h4 class="card-title text-center mb-4">Edit Profile</h4>
                        <p style="font-size: 13px;margin-bottom: 2px;" class="fw-bold">Is this goodbye? Are you sure you
                            don't want to reconsider?</p>
                        <p style="font-size: 13px;margin-bottom: 2px;">You'll lose your order history, saved details,
                            SneakCash, SuperCoins, and all other coupons and
                            benefits.</p>
                        <p style="font-size: 13px;margin-bottom: 2px;">Any account-related benefits will be forfeited
                            once the account is deleted and will no longer be
                            available to you. You cannot recover them. However, you can always create a new account. By
                            deleting your account, you acknowledge you have read our Privacy Policy.</p>
                        <p style="font-size: 13px;margin-bottom: 2px;" class="fw-bold">Any pending orders, exchanges,
                            returns, or refunds will no longer be accessible via your
                            account.</p>
                        <p style="font-size: 13px;margin-bottom: 2px;">

                            Rorito will try to complete the open transactions in the next 30 days on a best-effort basis.
                            However, we cannot ensure tracking and traceability of transactions once the account is
                            deleted.

                        </p>
                        <p style="font-size: 13px;margin-bottom: 2px;" class="fw-bold">Rorito may not extend the New User
                            coupon if an account is created with the same mobile number or
                            email ID.</p>

                        <p style="font-size: 13px;margin-bottom: 2px;" class="fw-semibold"> Rorito may refuse or delay
                            deletion in case there are any pending grievances related to orders,
                            shipments, cancellations, or other services offered by Sneaker Head.</p>

                        <p style="font-size: 13px;margin-bottom: 2px;" class="fw-bold">Rorito may retain certain data for
                            legitimate reasons such as security, fraud prevention, future
                            abuse, regulatory compliance, including exercising legal rights, or complying with legal
                            orders
                            under applicable laws.</p>

                        <div class="d-flex justify-content-center mt-2">
                            <form action="/delete-account" method="post">
                                <button id="deleteAccountBtn" class="btn btn-dark btn-sm">Delete Account!</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <%- include("../partials/user/footer.ejs") %>
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
            <script>
                document.getElementById('deleteAccountBtn').addEventListener('click', function (e) {
                    e.preventDefault(); 

                    Swal.fire({
                        title: 'Are you sure?',
                        text: "This will permanently delete your account!",
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#d33',
                        cancelButtonColor: '#3085d6',
                        confirmButtonText: 'Yes, delete it!',
                        cancelButtonText: 'No, keep it'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            document.getElementById('deleteAccountForm').submit();
                        }
                    });
                });
            </script>